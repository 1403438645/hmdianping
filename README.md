# hmdianping
**项目简介**：项目主要使用使用**SpringBoot + MybatisPlus** 构建，数据库使用**Mysql**，中间件使用**redis**做缓存，**kafka消息队列**做异步下单；主要实现用户注册、登录、查询店铺和优惠卷信息、共同关注好友、点赞、博客推送、评论、签到等基本功能。

**项目功能：**

- **短信登录**：短信验证码登录，并用redis实现**共享session**登录。用jwt双令牌（**双token**）实现登录验证。用一个全局拦截器将登录之后将用户信息保存到**threadLocal**中，做到线程隔离。
- **商铺查询**：可以根据商铺类型和名称查询商铺信息，数据库和缓存的**双写一致问题**，采用**旁路缓存策略**，缓存空值防止缓存穿透，用逻辑过期防止缓存击穿问题。也可以根据位置信息显示附近商家信息。
- 优惠券模块：商家内部会发布优惠券，优惠券分为两种，普通券和秒杀券，对秒杀券这种可能产生**大并发量**的优惠券，对其中判断库存和一人一单逻辑写在lua脚本中，保证操作的**原子性**，然后**kafka消息队列**对lua脚本中判断符合资格的用户，进行异步下单处理。
- **博客模块**：可以发布博客，上传探店的图片和发布博客评论，并且用redis的zset集合显示点赞前五的用户头像
- **好友模块**：好友可以相互关注，可以查看关注列表和粉丝列表。已关注的用户的博客会推送到自己的页面。
- **用户签到**：redis的bitmap实现签到功能


同时前端项目部署再nginx上，因为没有集群，nginx做转发用
